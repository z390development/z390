@echo off
setlocal
pushd %~dp0
CD..
CD..
REM RUN RT BSAM	READ AND WRITE WITH/WITHOUT LBI
REM BLD? CREATES TEST FILE, CHK? VERIFIES TEST FILE, CPY? COPIES FILE
REM SEE TRE TRACE FILES FOR SNAP DUMPS OF RECORDS
ERASE bsam\*.ERR
ERASE bsam\TEST*.TFV
SET SNAPOUT=DUMMY
SET SYSUT2=bsam\TESTW.TFV
CALL bat\ASMLG bsam\BLDW.MLC TRACE || goto error
SET SYSUT1=bsam\TESTW.TFV
CALL bat\ASMLG bsam\CHKW.MLC TRACE || goto error
SET SYSUT2=bsam\TESTWL.TFV
CALL bat\ASMLG bsam\BLDWL.MLC TRACE || goto error
SET SYSUT1=bsam\TESTWL.TFV
CALL bat\ASMLG bsam\CHKWL.MLC TRACE || goto error
SET SYSUT1=bsam\TESTW.TFV
SET SYSUT2=bsam\CPYRW.VES
CALL bat\ASMLG bsam\CPYRW.MLC TRACE || goto error
SET SYSUT1=bsam\TESTwL.TFV
SET SYSUT2=bsam\CPYRWL.VES
CALL bat\ASMLG bsam\CPYRWL.MLC TRACE || goto error
DIR bsam\TEST*.TFV
goto:eof

:error
echo RUNRTBSAM.ERROR: Encountered RC %ERRORLEVEL% - exiting
exit /b %ERRORLEVEL%
