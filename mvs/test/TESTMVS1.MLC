         TITLE 'TESTMVS1 TEST COMMON MVS 3.8 MACROS'
**********************************************************************
* 06/30/09 RPI 1044 ADD MYPGM ENTRY
**********************************************************************
TESTMVS1 CSECT
         USING *,15
         SR   15,15
         BR   14
* DATA REFERENCES
MYEXIT   DS   0H
MYECB    DS   F
DATA4    DS   F
DATA8    DS   D
DATA16   DS   2D
MYAREA   EQU  *
MYLIST   EQU  *
MYLIMIT  EQU  *
MYNAME   EQU  *
CBUFRSQN DC   CL8'CBUFRCTL'
CBUFRSRN DC   CL4'CBUF'
MYPGM    EQU  *
         ENTRY   MYPGM
         ABEND   111,DUMP
MYACB    ACB     DDNAME=MYACB
         ATTACH  EPLOC=(3),ECB=(2),SZERO=YES,JSTCB=NO
         BLDL    MYDCB,MYLIST
         BUILD   MYAREA,10,4096
         CALL    MYPGM,(MYLIST),VL
         CHECK   MYDCB
         CLOSE   (MYDCB)
         CVT     DSECT=YES
TESTMVS1 CSECT
MYDCB    DCB     DSORG=PO,MACRF=R,DDNAME=MYDCB
         DCBD
TESTMVS1 CSECT
         DELETE EP=MYPGM
         DEQ  (CBUFRSQN,CBUFRSRN,4,STEP),MF=L
         DETACH  4(2)
         DYNALLOC
         ESETL MYDCB
         ESPIE SET,MYEXIT,5
         ESTAE MYEXIT
MYEXLST  EXLST EODAD=(MYEXIT,A)
         EXTRACT DATA8,FIELDS=(TIOT)
         FREEMAIN R,LV=(3),A=(4)
         GETMAIN RU,LV=(2),LOC=BELOW
         GETMAIN R,LV=(2),LOC=BELOW
         ENQ  (CBUFRSQN,CBUFRSRN,E,4,STEP),MF=L
         GENCB BLK=RPL,ACB=MYACB
         GET  MYDCB,MYAREA
         IDENTIFY EP=MYEXIT,ENTRY=MYEXIT
         LINK EP=MYPGM
         LOAD EP=MYPGM
         LOCATE MYLIST
         MODCB ACB=MYACB,EXLST=MYEXLST
         OPEN (MYDCB)
         POINT RPL=MYRPL
         POST MYECB
         PUT  MYDCB,MYAREA
         PUTX MYDCB
         RDJFCB MYDCB
         READ  DECB1,SF,MYDCB,MYAREA,'S'
MYRPL    RPL   ACB=MYACB
         RETURN (14,12)
         SAVE   (14,12)
         SETL    MYDCB,K,MYLIMIT
         SHOWCAT ACB=MYACB,AREA=DATA16,FWLEN=NO,NAME=MYNAME 
         SHOWCB  ACB=MYACB,AREA=DATA16,LENGTH=16,FIELDS=(DDNAME)
         SNAP    DCB=MYDCB,STORAGE=(DATA8,DATA16)
         STIMER WAIT,BINTVL=DATA4
         TGET  DATA16,16,ASIS
         TIME  DEC
         TPUT  DATA16,16,FULLSCR
         TTIMER CANCEL,TU
         WRITE DECB2,SF,MYDCB,MYAREA,'S'
         WTO   'HELLO WORLD'
         WTOR  'ENTER',DATA8,8,MYECB
         XCTL  EP=MYPGM
         XLATE DATA16,16,TO=A
         YREGS
         END         
















































